import{U as f}from"./users.service.d6d4fac6.js";import{i,_ as U,o,c as a,a as n,F as v,r as C,t as c,w as l,v as d,d as u,b as p}from"./index.2a9ae4dd.js";class k{createContactRequest(s){return i.post("/account/contacts/requests",{request:{secondUserId:s}})}changeContactRequest(s,q){return i.patch("/account/contacts/requests/"+s,{request:{status:q}})}deleteContactRequest(s){return i.delete("/account/contacts/requests/"+s)}}var h=new k;const x={name:"Users",data(){return{users:[]}},mounted(){f.getAll().then(e=>{this.users=e.data.users,console.log(e.data)},e=>{this.content=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})},methods:{approveRequest(e){e.loading=!0,h.changeContactRequest(e.contactRequestFirstUser[0].id,!0).then(s=>{this.users[this.users.indexOf(e)].contactRequestFirstUser[0].status=!0,this.users[this.users.indexOf(e)].contactRequestSecondUser=[{id:s.data.request.id,status:!0}],this.users[this.users.indexOf(e)].loading=!1},s=>{console.log("error approving request"),this.users[this.users.indexOf(e)].loading=!1})},createContactRequest(e){e.loading=!0,h.createContactRequest(e.id).then(s=>{this.users[this.users.indexOf(e)].contactRequestSecondUser=[{id:s.data.request.id,status:null}],this.users[this.users.indexOf(e)].loading=!1},s=>{console.log("error approving request"),this.users[this.users.indexOf(e)].loading=!1})},deleteContactRequest(e){e.loading=!0,h.deleteContactRequest(e.contactRequestSecondUser[0].id).then(s=>{this.users[this.users.indexOf(e)].contactRequestSecondUser=null,this.users[this.users.indexOf(e)].loading=!1},s=>{console.log("error deleting request"),this.users[this.users.indexOf(e)].loading=!1})}}},S={class:"container"},O=n("header",{class:"jumbotron"},[n("h3",null," Users ")],-1),F={class:"list-group"},y=["onClick","disabled"],A={class:"spinner-border spinner-border-sm"},N=p(" Add to contacts "),w=["onClick","disabled"],$={class:"spinner-border spinner-border-sm"},B=p(" Delete request "),D=["onClick","disabled"],V={class:"spinner-border spinner-border-sm"},j=p(" Approve request ");function E(e,s,q,L,R,r){return o(),a("div",S,[O,n("ul",F,[(o(!0),a(v,null,C(R.users,(t,m)=>{var g,_;return o(),a("li",{class:"list-group-item",key:m},[n("p",null,c(t.firstName)+" "+c(t.lastName),1),n("p",null,c(t.username),1),n("p",null,c(t.email),1),!t.contactRequestFirstUser&&!t.contactRequestSecondUser?(o(),a("button",{key:0,class:"btn btn-primary btn-block",onClick:b=>r.createContactRequest(t),disabled:t.loading},[l(n("span",A,null,512),[[d,t.loading]]),N],8,y)):u("",!0),!t.contactRequestFirstUser&&t.contactRequestSecondUser&&((g=t.contactRequestSecondUser[0])==null?void 0:g.status)===null?(o(),a("button",{key:1,class:"btn btn-danger btn-block",onClick:b=>r.deleteContactRequest(t),disabled:t.loading},[l(n("span",$,null,512),[[d,t.loading]]),B],8,w)):u("",!0),t.contactRequestFirstUser&&((_=t.contactRequestFirstUser[0])==null?void 0:_.status)===null&&!t.contactRequestSecondUser?(o(),a("button",{key:2,class:"btn btn-primary btn-block",onClick:b=>r.approveRequest(t),disabled:t.loading},[l(n("span",V,null,512),[[d,t.loading]]),j],8,D)):u("",!0)])}),128))])])}var G=U(x,[["render",E]]);export{G as default};
